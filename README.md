TODO:
- Change VecDeque to Vec (breaks pruning)